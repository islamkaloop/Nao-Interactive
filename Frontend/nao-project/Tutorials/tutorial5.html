<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles/styles.css">
    <link rel="stylesheet" href="./tutu1.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/waltograph" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
	<script src="../Workspace/blockly_compressed.js"></script>
	<script src="../Workspace/blocks_compressed.js"></script>
	<script src="../Workspace/blockly/generators/python.js"></script>
	<script src="../Workspace/python_compressed.js"></script>
	<script src="../Workspace/blockly/generators/python.js"></script>
	<script src="../Workspace/blockly/generators/python/loops.js"></script>
	<script src="../Workspace/blockly/generators/python/math.js"></script>
	<script src="../Workspace/blockly/generators/python/colour.js"></script>
	<script src="../Workspace/blockly/generators/python/logic.js"></script>
	<script src="../Workspace/blockly/generators/python/text.js"></script>
	<script src="../Workspace/blockly/generators/python/NaoActions.js"></script>
	<script src="../Workspace/blockly/generators/pseudo.js"></script>
	<script src="../Workspace/blockly/generators/pseudo/loops.js"></script>
	<script src="../Workspace/blockly/generators/pseudo/math.js"></script>
	<script src="../Workspace/blockly/generators/pseudo/color.js"></script>
	<script src="../Workspace/blockly/generators/pseudo/logic.js"></script>
	<script src="../Workspace/blockly/generators/pseudo/text.js"></script>
	<script src="../Workspace/blockly/generators/pseudo/NaoActions.js"></script>
	<script src="../Workspace/blockly/blocks/NAO.js"></script>
	<script src="../Workspace/blockly/msg/js/en.js"></script>
    <script src="../Workspace/theme.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="./tutorials.js"></script>

  </head>
  <body>
        <div id="gift" class="container-fluid gift">
                <!-- <div class="arrows prev"></div> -->
                <a href="../Tutorials/tutorial6.html"><div class="arrows next"></div></a>
                <div class="animated zoomIn delay-1s banner10">
                    <div class="pp"><h1>YOU WON !!!!!!!</h1></div>
                    <img src="../workspace/blockly/Nao images/GIFT.png" height="400" width="500">
                </div>
        </div>
    <nav class="navbar navbar-expand-lg " style="background-color:#5bb7e6e1">
        <span class="navbar-brand mb-0 h1 dot"></span>
        <span class="navbar-brand mb-0 h1">
            NAO
        </span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Workspace<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Docs</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Tutorials
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">Tutorial 1</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item active" href="#">Tutorial 2</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Tutorial 3</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About Us</a>
                </li>

            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <div id="main" class="container-fluid">
        <div class="row">
            <div class="col-8 rounded" style="background-color: #FFFFFF;">
                <div class="container-fluid banner">
                    <div class="row">
                        <div class="col-1" style="margin-top:15px">
                            <img src="../Workspace/blockly/Nao images/NAO.png">
                        </div>
                        <div class="col-11" style="margin-top:10px;">
                            <hgroup class="speech-bubble">

                                <h1> Tutorial #5</h1>
                                <blockquote id="bubble"> Can you block NAO?Make Nao moves 3 meters, use 3 blocks of "walk"</blockquote>
                            </hgroup>
                        </div>
                    </div>
                    <div class="row">
                        
                        <div class="col-12">
                            <div class="container-fluid rounded" style="background-color:#580134be;">
                                <div class="row">
                                    <div class="col-12">    
                                        <br>
                                        <button type="button" class="btn btn-success btn-sm" onclick="runCode()" style="margin-top: -25px"><i class="material-icons md-18">
                                            play_arrow
                                        </i>Run</button>
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="showCode()"data-toggle="modal" data-target="#exampleModalLong" style="margin-top: -25px;  margin-left:580px"><i class="material-icons md-18">
                                            code
                                        </i>Python</button>
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="PseudoCode()" data-toggle="modal" data-target="#exampleModalLong1" style="margin-top: -25px"><i class="material-icons md-18">
                                            code
                                        </i>Pesudo</button>
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="startover()" style="margin-top: -25px"><i class="material-icons md-18">
                                            replay
                                        </i>Start Over</button>
                                    </div>
                                </div>
                            </div>
                            <div id="blocklyDiv" style="height: 482px; width: 962px;"></div>
                            <xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none; ">

                        
                                <category name="Actions"  colour="#00adbc">

                                    <block type="stand"></block>
                                    <block type="sit"></block>
                                   
                                    <block type="walk">
                                        <value name="distance">
                                            <block type="math_number">
                                                <field name="NUM">1</field>
                                            </block>
                                        </value>
                                    </block>
                                    <block type="turn"></block>

                                    
                                    <!-- <block type="talk">
                                        <value name="text">
                                            <block type="text">
                                            </block>
                                        </value>
                                    </block>
                                    <block type="turn"></block>
                                    <block type="Lying_Belly"></block>
                                    <block type="Lying_Back"></block>
                       
                                            </category>

                                <category name="Sensors" colour="180">
                                    <block type="head_sensor"></block>
                                </category>
                                <category name="Logic" colour="#006666">
                                     <block type="controls_if" ></block>
                                     <block type="controls_ifelse" ></block>

                                </category> -->
                            </xml>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-4" id="example">
                    <img src="./tut 5.png" height="600" width="500" style="margin-right: 200px"> 
                </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Pyhton code</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div id="modal-body" class="modal-body">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div> 

      <div class="modal fade" id="exampleModalLong1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle1">Pseudo code</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div id="modal-body1" class="modal-body">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div> 

<script>
        var blocklyDiv = document.getElementById('blocklyDiv');
    var blockName="start";

    //var theme = Blockly.Theme(BlockStyles, categoryStyles);
    var demoWorkspace = Blockly.inject(blocklyDiv,
                {
            
            //theme: Blockly.Theme(BlockStyles, categoryStyles),

            media: '../Workspace/blockly/media/',
            zoom:
            {
                controls: true,
                wheel: true,
                startScale: 1.0,
                maxScale: 3,
                minScale: 0.3,
                scaleSpeed: 1.2
            },
            trashcan: true,
            toolbox: document.getElementById('toolbox'),
            
        });
        themeSettings();
        var newBlock = demoWorkspace.newBlock(blockName);

        newBlock.initSvg();
        newBlock.render();
          
        function startover(){
            var blockName="start";

            demoWorkspace.clear();
            var newBlock = demoWorkspace.newBlock(blockName);

        newBlock.initSvg();
        newBlock.render();
          
            

    }

      </script>
     
          <script>
                function showCode() {
                    $("#exampleModalLong").modal('handleUpdate')
                    var code = Blockly.Python.workspaceToCode(demoWorkspace);
                    Blockly.Python.INFINITE_LOOP_TRAP = null;
                    document.getElementById("modal-body").innerHTML ="<pre class='prettyprint'><code class='prettyprint'>"+code+"</code></pre>";
                    //alert(code)
                }
                function PseudoCode(){
                    $("#exampleModalLong1").modal('handleUpdate')

                    var code=Blockly.Pseudo.workspaceToCode(demoWorkspace);
                    Blockly.Pseudo.INFINITE_LOOP_TRAP = null;
                    document.getElementById("modal-body1").innerHTML ="<pre class='prettyprint'><code class='prettyprint'>"+code+"</code></pre>";

                    //alert(code)
                }
                var count=0;
                var bubble = document.getElementById("bubble");
                var text = bubble.innerHTML;
                function runCode() {
                    if(check5()){
                        var mainContainer = document.getElementById("main");
                        mainContainer.style.opacity=0.2;
                        var giftContainer=document.getElementById("gift");
                        giftContainer.style.display="block";
                        Blockly.Python.INFINITE_LOOP_TRAP = null;
        var code = Blockly.Python.workspaceToCode(demoWorkspace);
        var o = new Object();
        o.Code = code;
        console.log(o);
        var jsonArray = JSON.parse(JSON.stringify(o))
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://127.0.0.1:5000/savecode",
            "method": "POST",
            "headers": {
                "Content-Type": "application/json",
                "cache-control": "no-cache",
            },
            "data": JSON.stringify(o),
            "dataType": 'json',
        }

        $.ajax(settings).done(function (response) {
            console.log(response);
        });
    }
                else{
                    if(count==0){
                        bubble.innerHTML= text + "<br> Try again!!";
                    }else if(count==1){
                        bubble.innerHTML= text + "<br> Trace the sequence again.";
                    }
                    else if (count==2){
                        bubble.innerHTML=text+"<br> Try reconnecting the blocks in different order"
                    }
                    else if (count>=3 ){
                        bubble.innerHTML=text+"<br> Still wrong, try again"
                    }
                    
                    count++;
                }
                }
        
            </script>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>